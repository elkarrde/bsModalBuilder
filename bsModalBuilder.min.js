var ModalBuilder;ModalBuilder=function(t){null==t&&(t=null),this.__version="0.1.5",this.defaultParams={title:null,hasTitle:!0,hasFooter:!0,content:null,isClosable:!0,doesFade:!0,size:!1,buttons:[{text:"Close",type:"dismiss",style:"btn-default"},{text:"Ok",type:"submit",style:"btn-primary"}]},null!=t&&$.extend(this.defaultParams,t)},ModalBuilder.prototype.buildModal=function(t,l,o,n){var a,e,i,d,s,u,r,m,c,p,b,f,y,h,v,g;return null==n&&(n=!1),h=this.defaultParams,n!==!1&&(e=Object.getOwnPropertyNames(n),e.forEach(function(t){h[t]=n[t]})),f=this.__getModalId(),g=null!=t?t:this.defaultParams.title,u=null!=l?l:this.defaultParams.content,i="function"==typeof o?o:null,d='<button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>',null!=h.noClose&&h.noClose===!0&&(d=""),c='<div class="modal-header">\n  '+d+'\n  <h4 class="modal-title" id="ModalLabel_'+f+'">'+g+"</h4>\n</div>",c=null!=h.hasTitle&&h.hasTitle===!0?c:"",r='<div class="modal-body">\n  '+u+"\n</div>",r=null!=l?r:"",m='<div class="modal-footer">',a=[],h.buttons.forEach(function(t){var l,o,n,e;null!=t.type&&(o=" data-"+t.type+'="modal"'),n=null!=t.style?t.style:"btn-default",l=null!=t.bind?' data-bind="'+t.bind+'"':"",e="submit"===t.type?"submit":"button",m+='<button type="'+e+'" class="btn '+n+'"'+o+l+">"+t.text+"</button>",null!=t.type&&"dismiss"!==t.type&&"submit"!==t.type&&a.push(t.type)}),m+="</div>",m+="</div>",m=null!=h.hasFooter&&h.hasFooter===!0?m:"",y=null!=h.noClose&&h.noClose===!0?"":" keyboard",p=null!=h.doesFade&&h.doesFade===!1?"":" fade",v="",null!=h.size&&("lg"===h.size&&(v=" modal-lg"),"sm"===h.size&&(v=" modal-sm")),b='<div class="modal'+p+y+'" id="modal_'+f+'" tabindex="-1" role="dialog" aria-labelledby="ModalLabel_'+f+'" aria-hidden="true">\n  <div class="modal-dialog'+v+'">\n    <div class="modal-content">\n      '+c+"\n      "+r+"\n      "+m+"\n    </div>\n  </div>\n</div>",s=this.__getContainer(),s.append(b),$("#modal_"+f+' [data-submit="modal"]').click(function(){var t,l,n,a;if($("#modal_"+f).attr("data-interaction","submit"),$("#modal_"+f).modal("toggle"),null!==o&&"string"!=typeof o&&"number"!=typeof o&&"boolean"!=typeof o){if(1===$("#modal_"+f+" .form-input").length)a=$("#modal_"+f+" .form-input").val();else for(t=0,n=$("#modal_"+f+" .form-input").length,a={};n>t;)l=$("#modal_"+f+" .form-input").eq(t),a[l.attr("name")]=l.val(),t++;"function"==typeof o&&o(a),"object"==typeof o&&null!=o.submit&&o.submit(a)}}),$("#modal_"+f+' [data-dismiss="modal"]').click(function(){$("#modal_"+f).attr("data-interaction","dismiss"),$("#modal_"+f).modal("toggle"),null!==o&&"string"!=typeof o&&"number"!=typeof o&&"boolean"!=typeof o&&"object"==typeof o&&null!=o.dismiss&&o.dismiss()}),a.forEach(function(t){$("#modal_"+f+" [data-"+t+'="modal"]').click(function(){return $("#modal_"+f).attr("data-interaction",t),$("#modal_"+f).modal("toggle"),null!==o&&"string"!=typeof o&&"number"!=typeof o&&"boolean"!=typeof o&&"object"==typeof o&&null!=o[t]?o[t]():void 0})}),$("#modal_"+f).keydown(function(t){"Enter"===t.key?$("#modal_"+f+' [data-submit="modal"]').trigger("click"):"Escape"===t.key&&$("#modal_"+f+' [data-dismiss="modal"]').trigger("click")}),"#modal_"+f},ModalBuilder.prototype.show=function(t,l,o){null==l&&(l=!1),null==o&&(o=!1),$(t).modal("show").on("shown.bs.modal",function(){$(t).find("input").eq(0).focus(),l!==!1&&l(t)}),$(t).on("hide.bs.modal",function(l){$(t).find("input").eq(0).focus(),o!==!1&&o(t,l)})},ModalBuilder.prototype.hide=function(t){$(t).modal("hide")},ModalBuilder.prototype.modal=function(t,l,o,n){var a;return null==n&&(n=!1),a=this.buildModal(t,l,o,n),"function"==typeof n.onloadCallback&&"function"==typeof n.oncloseCallback?this.show(a,n.onloadCallback,n.oncloseCallback):"function"==typeof n.onloadCallback?this.show(a,n.onloadCallback):this.show(a),a},ModalBuilder.prototype.alert=function(t,l){var o;return o=this.modal(t,l,null,{hasTitle:null!=t,buttons:[{text:"Ok",type:"submit",style:"btn-primary"}]})},ModalBuilder.prototype.confirm=function(t,l,o){var n;return n=this.modal(t,l,o,{hasTitle:null!=t,buttons:[{text:"Cancel",type:"dismiss",style:"btn-standard"},{text:"Ok",type:"submit",style:"btn-primary"}]})},ModalBuilder.prototype.prompt=function(t,l,o,n){var a,e,i,d;return null==n&&(n=!1),i=null!=n.placeholder?n.placeholder:"Text input",a=null!=n.inputBind?' data-bind="'+n.inputBind+'"':"",d='<div class="form-group">\n  <p>'+l+'</p>\n  <input type="text" class="form-control form-input" placeholder="'+i+'" autofocus="autofocus"'+a+">\n</div>",e=this.modal(t,d,o,{hasTitle:null!=t,buttons:[{text:"Cancel",type:"dismiss",style:"btn-standard",bind:null!=n.cancelBind?n.cancelBind:null},{text:"Ok",type:"submit",style:"btn-primary",bind:null!=n.confirmBind?n.confirmBind:null}]})},ModalBuilder.prototype.html=function(t,l,o,n){var a,e,i;return null==n&&(n=!1),e=l,a=null!=n.buttons?n.buttons:[{text:"Cancel",type:"dismiss",style:"btn-standard"},{text:"Ok",type:"submit",style:"btn-primary"}],i=this.modal(t,e,o,{hasTitle:null!=t,buttons:a,onloadCallback:null!=n.onloadCallback?n.onloadCallback:null})},ModalBuilder.prototype.__getModalId=function(){return Math.floor(101*Math.random())+Math.floor(101*Math.random())},ModalBuilder.prototype.__getContainer=function(){var t,l,o;return t=$(0!==$(".container:visible").length?".container:visible":".container-fluid:visible"),0===t.length&&(t=$("body")),1===t.length?t:(l=[],t.each(function(t){var o;o={order:t,height:$(this).height()},l.push(o)}),o=l.sort(function(t,l){return t.height<l.height}),t.eq(o[0].order))};